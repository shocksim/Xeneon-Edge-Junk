<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Sans Smoke Clock</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@800&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET & LAYOUT --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            background-color: #050505; /* Deep black */
            color: #ffffff;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Open Sans', sans-serif; /* Open Sans applied here */
            overflow: hidden;
        }

        /* --- CONTAINER --- */
        .clock-container {
            display: flex;
            align-items: baseline; /* Aligns text to the bottom baseline */
            justify-content: center;
            gap: 15px; 
            /* Push everything up slightly to look optically centered */
            transform: translateY(-10px); 
        }

        /* --- TYPOGRAPHY --- */
        .time-group {
            position: relative;
            font-size: 11rem; /* Slightly smaller to fit Open Sans width */
            font-weight: 800; /* Extra Bold */
            line-height: 1;
            width: 260px; 
            text-align: right; /* Right align numbers for better spacing */
            
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Specific alignment tweaks */
        #hours-display { justify-content: flex-end; }
        #minutes-display { justify-content: flex-start; }

        .colon {
            font-size: 6rem;
            opacity: 0.3;
            transform: translateY(-20px); /* Move colon up to center visually */
            animation: breathe 3s infinite ease-in-out;
            font-weight: 800;
        }

        .ampm {
            font-size: 3rem;
            font-weight: 800;
            color: #4a4a4a; /* Darker grey for subtlety */
            margin-left: 10px;
            /* No animation needed for AM/PM as it rarely changes */
        }

        /* --- THE SMOKE ANIMATION LAYERS --- */
        .digit-wrapper {
            position: relative;
            display: inline-block;
        }

        .smoke-out {
            animation: evaporate 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 0;
            white-space: nowrap;
        }

        .smoke-in {
            animation: condense 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        /* --- KEYFRAMES --- */
        @keyframes evaporate {
            0% {
                opacity: 1;
                filter: blur(0px);
                transform: translateX(-50%) translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                filter: blur(20px);
                transform: translateX(-50%) translateY(-60px) scale(1.2);
            }
        }

        @keyframes condense {
            0% {
                opacity: 0;
                filter: blur(20px);
                transform: scale(0.8) translateY(20px);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                filter: blur(0px);
                transform: scale(1) translateY(0);
            }
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

    </style>
</head>
<body>

    <div class="clock-container">
        <div class="time-group">
            <span id="hours-display" class="digit-wrapper">12</span>
        </div>

        <div class="colon">:</div>

        <div class="time-group">
            <span id="minutes-display" class="digit-wrapper">00</span>
        </div>

        <div class="ampm" id="ampm">AM</div>
    </div>

    <script>
        let prevHours = null;
        let prevMinutes = null;

        function updateTime() {
            const now = new Date();
            let rawHours = now.getHours();
            let rawMinutes = now.getMinutes();

            // AM/PM Logic
            const ampmString = rawHours >= 12 ? 'PM' : 'AM';
            document.getElementById('ampm').innerText = ampmString;

            // 12-Hour Logic
            let displayHours = rawHours % 12;
            displayHours = displayHours ? displayHours : 12; // Convert 0 to 12
            
            // Format Strings
            let hStr = displayHours.toString(); 
            let mStr = rawMinutes.toString().padStart(2, '0');

            // UPDATE HOURS
            if (hStr !== prevHours) {
                animateChange('hours-display', hStr);
                prevHours = hStr;
            }

            // UPDATE MINUTES
            if (mStr !== prevMinutes) {
                animateChange('minutes-display', mStr);
                prevMinutes = mStr;
            }
        }

        function animateChange(elementId, newValue) {
            const container = document.getElementById(elementId);
            const oldText = container.innerText;
            
            if (oldText === "" || oldText === "LOADING") {
                container.innerText = newValue;
                return;
            }

            // Create Ghost
            const ghost = document.createElement("span");
            ghost.innerText = oldText;
            ghost.className = "smoke-out";
            container.parentElement.appendChild(ghost);

            // Update Real Element
            container.innerText = newValue;
            container.classList.remove("smoke-in");
            void container.offsetWidth; // Trigger reflow
            container.classList.add("smoke-in");

            // Cleanup
            setTimeout(() => {
                ghost.remove();
            }, 1200);
        }

        // --- INIT ---
        // Sync with seconds for minute-perfect updates
        function init() {
            updateTime();
            const now = new Date();
            const secondsUntilNextMinute = 60 - now.getSeconds();
            
            setTimeout(() => {
                updateTime();
                setInterval(updateTime, 60000); 
            }, secondsUntilNextMinute * 1000);
        }

        init();

    </script>
</body>
</html>
